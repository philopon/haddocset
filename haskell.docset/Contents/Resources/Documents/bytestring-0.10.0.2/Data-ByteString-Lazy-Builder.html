<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta><title>Data.ByteString.Lazy.Builder</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean"></link><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Data-ByteString-Lazy-Builder.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html">Source</a></li><li><a href="../bytestring-0.10.0.2/index.html">Contents</a></li><li><a href="../bytestring-0.10.0.2/doc-index.html">Index</a></li></ul><p class="caption">bytestring-0.10.0.2: Fast, compact, strict and lazy byte strings with a list interface</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Portability</th><td>GHC</td></tr><tr><th>Maintainer</th><td>Simon Meier &lt;iridcode@gmail.com&gt;</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Data.ByteString.Lazy.Builder</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="../bytestring-0.10.0.2/#g:1">The Builder type
</a></li><li><a href="../bytestring-0.10.0.2/#g:2">Executing Builders
</a></li><li><a href="../bytestring-0.10.0.2/#g:3">Creating Builders
</a><ul><li><a href="../bytestring-0.10.0.2/#g:4">Binary encodings
</a><ul><li><a href="../bytestring-0.10.0.2/#g:5">Big-endian
</a></li><li><a href="../bytestring-0.10.0.2/#g:6">Little-endian
</a></li></ul></li><li><a href="../bytestring-0.10.0.2/#g:7">Character encodings
</a><ul><li><a href="../bytestring-0.10.0.2/#g:8">ASCII (Char7)
</a></li><li><a href="../bytestring-0.10.0.2/#g:9">ISO/IEC 8859-1 (Char8)
</a></li><li><a href="../bytestring-0.10.0.2/#g:10">UTF-8
</a></li></ul></li></ul></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p><code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></code>s are used to efficiently construct sequences of bytes from
  smaller parts.
Typically,
  such a construction is part of the implementation of an <em>encoding</em>, i.e.,
  a function for converting Haskell values to sequences of bytes.
Examples of encodings are the generation of the sequence of bytes
  representing a HTML document to be sent in a HTTP response by a
  web application or the serialization of a Haskell value using
  a fixed binary format.
</p><p>For an <em>efficient implementation of an encoding</em>,
  it is important that (a) little time is spent on converting
  the Haskell values to the resulting sequence of bytes <em>and</em>
  (b) that the representation of the resulting sequence
  is such that it can be consumed efficiently.
<code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></code>s support (a) by providing an <em>O(1)</em> concatentation operation
  and efficient implementations of basic encodings for <code><a href="../base-4.6.0.1/Data-Char.html#t:Char">Char</a></code>s, <code><a href="../base-4.6.0.1/Data-Int.html#t:Int">Int</a></code>s,
  and other standard Haskell values.
They support (b) by providing their result as a lazy <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></code>,
  which is internally just a linked list of pointers to <em>chunks</em>
  of consecutive raw memory.
Lazy <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></code>s can be efficiently consumed by functions that
  write them to a file or send them over a network socket.
Note that each chunk boundary incurs expensive extra work (e.g., a system call)
  that must be amortized over the work spent on consuming the chunk body.
<code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></code>s therefore take special care to ensure that the
  average chunk size is large enough.
The precise meaning of large enough is application dependent.
The current implementation is tuned
  for an average chunk size between 4kb and 32kb,
  which should suit most applications.
</p><p>As a simple example of an encoding implementation,
  we show how to efficiently convert the following representation of mixed-data
  tables to an UTF-8 encoded Comma-Separated-Values (CSV) table.
</p><pre>data Cell = StringC String
          | IntC Int
          deriving( Eq, Ord, Show )

type Row   = [Cell]
type Table = [Row]
</pre><p>We use the following imports and abbreviate <code><a href="../base-4.6.0.1/Data-Monoid.html#v:mappend">mappend</a></code> to simplify reading.
</p><pre>
import qualified <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy.html">Data.ByteString.Lazy</a>               as L
import           <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html">Data.ByteString.Lazy.Builder</a>
import           <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder-ASCII.html">Data.ByteString.Lazy.Builder.ASCII</a> (<code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder-ASCII.html#v:intDec">intDec</a></code>)
import           Data.Monoid
import           Data.Foldable                        (<code><a href="../base-4.6.0.1/Data-Foldable.html#v:foldMap">foldMap</a></code>)
import           Data.List                            (<code><a href="../base-4.6.0.1/Data-List.html#v:intersperse">intersperse</a></code>)

infixr 4 &lt;&gt;
(&lt;&gt;) :: <code><a href="../base-4.6.0.1/Data-Monoid.html#t:Monoid">Monoid</a></code> m =&gt; m -&gt; m -&gt; m
(&lt;&gt;) = <code><a href="../base-4.6.0.1/Data-Monoid.html#v:mappend">mappend</a></code>
</pre><p>CSV is a character-based representation of tables. For maximal modularity,
we could first render <code>Table</code>s as <code><a href="../base-4.6.0.1/Data-String.html#t:String">String</a></code>s and then encode this <code><a href="../base-4.6.0.1/Data-String.html#t:String">String</a></code>
using some Unicode character encoding. However, this sacrifices performance
due to the intermediate <code><a href="../base-4.6.0.1/Data-String.html#t:String">String</a></code> representation being built and thrown away
right afterwards. We get rid of this intermediate <code><a href="../base-4.6.0.1/Data-String.html#t:String">String</a></code> representation by
fixing the character encoding to UTF-8 and using <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></code>s to convert
<code>Table</code>s directly to UTF-8 encoded CSV tables represented as lazy
<code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></code>s.
</p><pre>
encodeUtf8CSV :: Table -&gt; L.ByteString
encodeUtf8CSV = <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#v:toLazyByteString">toLazyByteString</a></code> . renderTable

renderTable :: Table -&gt; Builder
renderTable rs = <code><a href="../base-4.6.0.1/Data-Monoid.html#v:mconcat">mconcat</a></code> [renderRow r &lt;&gt; <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#v:charUtf8">charUtf8</a></code> '\n' | r &lt;- rs]

renderRow :: Row -&gt; Builder
renderRow []     = <code><a href="../base-4.6.0.1/Data-Monoid.html#v:mempty">mempty</a></code>
renderRow (c:cs) =
    renderCell c &lt;&gt; mconcat [ charUtf8 ',' &lt;&gt; renderCell c' | c' &lt;- cs ]

renderCell :: Cell -&gt; Builder
renderCell (StringC cs) = renderString cs
renderCell (IntC i)     = <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder-ASCII.html#v:intDec">intDec</a></code> i

renderString :: String -&gt; Builder
renderString cs = charUtf8 '&quot;' &lt;&gt; foldMap escape cs &lt;&gt; charUtf8 '&quot;'
  where
    escape '\\' = charUtf8 '\\' &lt;&gt; charUtf8 '\\'
    escape '\&quot;' = charUtf8 '\\' &lt;&gt; charUtf8 '\&quot;'
    escape c    = charUtf8 c
</pre><p>Note that the ASCII encoding is a subset of the UTF-8 encoding,
  which is why we can use the optimized function <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder-ASCII.html#v:intDec">intDec</a></code> to
  encode an <code><a href="../base-4.6.0.1/Data-Int.html#t:Int">Int</a></code> as a decimal number with UTF-8 encoded digits.
Using <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder-ASCII.html#v:intDec">intDec</a></code> is more efficient than <code><code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#v:stringUtf8">stringUtf8</a></code> . <code><a href="../base-4.6.0.1/Text-Show.html#v:show">show</a></code></code>,
  as it avoids constructing an intermediate <code><a href="../base-4.6.0.1/Data-String.html#t:String">String</a></code>.
Avoiding this intermediate data structure significantly improves
  performance because encoding <code>Cell</code>s is the core operation
  for rendering CSV-tables.
See <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder-BasicEncoding.html">Data.ByteString.Lazy.Builder.BasicEncoding</a> for further
  information on how to improve the performance of <code>renderString</code>.
</p><p>We demonstrate our UTF-8 CSV encoding function on the following table.
</p><pre>
strings :: [String]
strings =  [&quot;hello&quot;, &quot;\&quot;1\&quot;&quot;, &quot;λ-wörld&quot;]

table :: Table
table = [map StringC strings, map IntC [-3..3]]
</pre><p>The expression <code>encodeUtf8CSV table</code> results in the following lazy
<code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></code>.
</p><pre>Chunk &quot;\&quot;hello\&quot;,\&quot;\\\&quot;1\\\&quot;\&quot;,\&quot;\206\187-w\195\182rld\&quot;\n-3,-2,-1,0,1,2,3\n&quot; Empty
</pre><p>We can clearly see that we are converting to a <em>binary</em> format. The 'λ'
and 'ö' characters, which have a Unicode codepoint above 127, are
expanded to their corresponding UTF-8 multi-byte representation.
</p><p>We use the <code>criterion</code> library (<a href="http://hackage.haskell.org/package/criterion">http://hackage.haskell.org/package/criterion</a>)
  to benchmark the efficiency of our encoding function on the following table.
</p><pre>import Criterion.Main     -- add this import to the ones above

maxiTable :: Table
maxiTable = take 1000 $ cycle table

main :: IO ()
main = defaultMain
  [ bench &quot;encodeUtf8CSV maxiTable (original)&quot; $
      whnf (L.length . encodeUtf8CSV) maxiTable
  ]
</pre><p>On a Core2 Duo 2.20GHz on a 32-bit Linux,
  the above code takes 1ms to generate the 22'500 bytes long lazy <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></code>.
Looking again at the definitions above,
  we see that we took care to avoid intermediate data structures,
  as otherwise we would sacrifice performance.
For example,
  the following (arguably simpler) definition of <code>renderRow</code> is about 20% slower.
</p><pre>renderRow :: Row -&gt; Builder
renderRow  = mconcat . intersperse (charUtf8 ',') . map renderCell
</pre><p>Similarly, using <em>O(n)</em> concatentations like <code><a href="../base-4.6.0.1/Data-List.html#v:-43--43-">++</a></code> or the equivalent <code><a href="../bytestring-0.10.0.2/Data-ByteString.html#v:concat">concat</a></code>
  operations on strict and lazy <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></code>s should be avoided.
The following definition of <code>renderString</code> is also about 20% slower.
</p><pre>renderString :: String -&gt; Builder
renderString cs = charUtf8 $ &quot;\&quot;&quot; ++ concatMap escape cs ++ &quot;\&quot;&quot;
  where
    escape '\\' = &quot;\\&quot;
    escape '\&quot;' = &quot;\\\&quot;&quot;
    escape c    = return c
</pre><p>Apart from removing intermediate data-structures,
  encodings can be optimized further by fine-tuning their execution
  parameters using the functions in <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder-Extras.html">Data.ByteString.Lazy.Builder.Extras</a> and
  their &quot;inner loops&quot; using the functions in
  <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder-BasicEncoding.html">Data.ByteString.Lazy.Builder.BasicEncoding</a>.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span>  <a href="../bytestring-0.10.0.2/#t:Builder">Builder</a> </li><li class="src short"><a href="../bytestring-0.10.0.2/#v:toLazyByteString">toLazyByteString</a> :: <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:hPutBuilder">hPutBuilder</a> :: <a href="../base-4.6.0.1/GHC-IO-Handle.html#t:Handle">Handle</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a> -&gt; <a href="../base-4.6.0.1/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="../bytestring-0.10.0.2/#v:byteString">byteString</a> :: <a href="../bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:lazyByteString">lazyByteString</a> :: <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:int8">int8</a> :: <a href="../base-4.6.0.1/Data-Int.html#t:Int8">Int8</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:word8">word8</a> :: <a href="../base-4.6.0.1/Data-Word.html#t:Word8">Word8</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:int16BE">int16BE</a> :: <a href="../base-4.6.0.1/Data-Int.html#t:Int16">Int16</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:int32BE">int32BE</a> :: <a href="../base-4.6.0.1/Data-Int.html#t:Int32">Int32</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:int64BE">int64BE</a> :: <a href="../base-4.6.0.1/Data-Int.html#t:Int64">Int64</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:word16BE">word16BE</a> :: <a href="../base-4.6.0.1/Data-Word.html#t:Word16">Word16</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:word32BE">word32BE</a> :: <a href="../base-4.6.0.1/Data-Word.html#t:Word32">Word32</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:word64BE">word64BE</a> :: <a href="../base-4.6.0.1/Data-Word.html#t:Word64">Word64</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:floatBE">floatBE</a> :: <a href="../base-4.6.0.1/Prelude.html#t:Float">Float</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:doubleBE">doubleBE</a> :: <a href="../base-4.6.0.1/Prelude.html#t:Double">Double</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:int16LE">int16LE</a> :: <a href="../base-4.6.0.1/Data-Int.html#t:Int16">Int16</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:int32LE">int32LE</a> :: <a href="../base-4.6.0.1/Data-Int.html#t:Int32">Int32</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:int64LE">int64LE</a> :: <a href="../base-4.6.0.1/Data-Int.html#t:Int64">Int64</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:word16LE">word16LE</a> :: <a href="../base-4.6.0.1/Data-Word.html#t:Word16">Word16</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:word32LE">word32LE</a> :: <a href="../base-4.6.0.1/Data-Word.html#t:Word32">Word32</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:word64LE">word64LE</a> :: <a href="../base-4.6.0.1/Data-Word.html#t:Word64">Word64</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:floatLE">floatLE</a> :: <a href="../base-4.6.0.1/Prelude.html#t:Float">Float</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:doubleLE">doubleLE</a> :: <a href="../base-4.6.0.1/Prelude.html#t:Double">Double</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:char7">char7</a> :: <a href="../base-4.6.0.1/Data-Char.html#t:Char">Char</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:string7">string7</a> :: <a href="../base-4.6.0.1/Data-String.html#t:String">String</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:char8">char8</a> :: <a href="../base-4.6.0.1/Data-Char.html#t:Char">Char</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:string8">string8</a> :: <a href="../base-4.6.0.1/Data-String.html#t:String">String</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:charUtf8">charUtf8</a> :: <a href="../base-4.6.0.1/Data-Char.html#t:Char">Char</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li><li class="src short"><a href="../bytestring-0.10.0.2/#v:stringUtf8">stringUtf8</a> :: <a href="../base-4.6.0.1/Data-String.html#t:String">String</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></li></ul></div><div id="interface"><h1 id="g:1">The Builder type
</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Builder" class="def">Builder</a>  <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder-Internal.html#Builder" class="link">Source</a></p><div class="doc"><p><code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></code>s denote sequences of bytes.
 They are <code><a href="../base-4.6.0.1/Data-Monoid.html#t:Monoid">Monoid</a></code>s where
   <code><a href="../base-4.6.0.1/Data-Monoid.html#v:mempty">mempty</a></code> is the zero-length sequence and
   <code><a href="../base-4.6.0.1/Data-Monoid.html#v:mappend">mappend</a></code> is concatenation, which runs in <em>O(1)</em>.
</p></div><div class="subs instances"><p id="control.i:Builder" class="caption collapser" onclick="toggleSection('i:Builder')">Instances</p><div id="section.i:Builder" class="show"><table><tr><td class="src"><a href="../base-4.6.0.1/Data-Monoid.html#t:Monoid">Monoid</a> <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></td><td class="doc empty"> </td></tr></table></div></div></div><h1 id="g:2">Executing Builders
</h1><div class="doc"><p>Internally, <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></code>s are buffer-filling functions. They are
 executed by a <em>driver</em> that provides them with an actual buffer to
 fill. Once called with a buffer, a <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></code> fills it and returns a
 signal to the driver telling it that it is either done, has filled the
 current buffer, or wants to directly insert a reference to a chunk of
 memory. In the last two cases, the <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></code> also returns a
 continutation <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></code> that the driver can call to fill the next
 buffer. Here, we provide the two drivers that satisfy almost all use
 cases. See <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder-Extras.html">Data.ByteString.Lazy.Builder.Extras</a>, for information
 about fine-tuning them.
</p></div><div class="top"><p class="src"><a name="v:toLazyByteString" class="def">toLazyByteString</a> :: <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#toLazyByteString" class="link">Source</a></p><div class="doc"><p>Execute a <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></code> and return the generated chunks as a lazy <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></code>.
 The work is performed lazy, i.e., only when a chunk of the lazy <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></code>
 is forced.
</p></div></div><div class="top"><p class="src"><a name="v:hPutBuilder" class="def">hPutBuilder</a> :: <a href="../base-4.6.0.1/GHC-IO-Handle.html#t:Handle">Handle</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a> -&gt; <a href="../base-4.6.0.1/System-IO.html#t:IO">IO</a> ()<a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#hPutBuilder" class="link">Source</a></p><div class="doc"><p>Output a <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></code> to a <code><a href="../base-4.6.0.1/GHC-IO-Handle.html#t:Handle">Handle</a></code>.
 The <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></code> is executed directly on the buffer of the <code><a href="../base-4.6.0.1/GHC-IO-Handle.html#t:Handle">Handle</a></code>. If the
 buffer is too small (or not present), then it is replaced with a large
 enough buffer.
</p><p>It is recommended that the <code><a href="../base-4.6.0.1/GHC-IO-Handle.html#t:Handle">Handle</a></code> is set to binary and
 <code>BlockBuffering</code> mode. See <code>hSetBinaryMode</code> and <code>hSetBuffering</code>.
</p><p>This function is more efficient than <code>hPut . <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#v:toLazyByteString">toLazyByteString</a></code></code> because in
 many cases no buffer allocation has to be done. Moreover, the results of
 several executions of short <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></code>s are concatenated in the <code><a href="../base-4.6.0.1/GHC-IO-Handle.html#t:Handle">Handle</a></code>s
 buffer, therefore avoiding unnecessary buffer flushes.
</p></div></div><h1 id="g:3">Creating Builders
</h1><h2 id="g:4">Binary encodings
</h2><div class="top"><p class="src"><a name="v:byteString" class="def">byteString</a> :: <a href="../bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder-Internal.html#byteString" class="link">Source</a></p><div class="doc"><p>Create a <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></code> denoting the same sequence of bytes as a strict
 <code><a href="../bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a></code>.
 The <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></code> inserts large <code><a href="../bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a></code>s directly, but copies small ones
 to ensure that the generated chunks are large on average.
</p></div></div><div class="top"><p class="src"><a name="v:lazyByteString" class="def">lazyByteString</a> :: <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder-Internal.html#lazyByteString" class="link">Source</a></p><div class="doc"><p>Create a <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></code> denoting the same sequence of bytes as a lazy
 <code><a href="../bytestring-0.10.0.2/Data-ByteString.html#t:ByteString">ByteString</a></code>.
 The <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a></code> inserts large chunks of the lazy <code><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></code> directly,
 but copies small ones to ensure that the generated chunks are large on
 average.
</p></div></div><div class="top"><p class="src"><a name="v:int8" class="def">int8</a> :: <a href="../base-4.6.0.1/Data-Int.html#t:Int8">Int8</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#int8" class="link">Source</a></p><div class="doc"><p>Encode a single signed byte as-is.
</p></div></div><div class="top"><p class="src"><a name="v:word8" class="def">word8</a> :: <a href="../base-4.6.0.1/Data-Word.html#t:Word8">Word8</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#word8" class="link">Source</a></p><div class="doc"><p>Encode a single unsigned byte as-is.
</p></div></div><h3 id="g:5">Big-endian
</h3><div class="top"><p class="src"><a name="v:int16BE" class="def">int16BE</a> :: <a href="../base-4.6.0.1/Data-Int.html#t:Int16">Int16</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#int16BE" class="link">Source</a></p><div class="doc"><p>Encode an <code><a href="../base-4.6.0.1/Data-Int.html#t:Int16">Int16</a></code> in big endian format.
</p></div></div><div class="top"><p class="src"><a name="v:int32BE" class="def">int32BE</a> :: <a href="../base-4.6.0.1/Data-Int.html#t:Int32">Int32</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#int32BE" class="link">Source</a></p><div class="doc"><p>Encode an <code><a href="../base-4.6.0.1/Data-Int.html#t:Int32">Int32</a></code> in big endian format.
</p></div></div><div class="top"><p class="src"><a name="v:int64BE" class="def">int64BE</a> :: <a href="../base-4.6.0.1/Data-Int.html#t:Int64">Int64</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#int64BE" class="link">Source</a></p><div class="doc"><p>Encode an <code><a href="../base-4.6.0.1/Data-Int.html#t:Int64">Int64</a></code> in big endian format.
</p></div></div><div class="top"><p class="src"><a name="v:word16BE" class="def">word16BE</a> :: <a href="../base-4.6.0.1/Data-Word.html#t:Word16">Word16</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#word16BE" class="link">Source</a></p><div class="doc"><p>Encode a <code><a href="../base-4.6.0.1/Data-Word.html#t:Word16">Word16</a></code> in big endian format.
</p></div></div><div class="top"><p class="src"><a name="v:word32BE" class="def">word32BE</a> :: <a href="../base-4.6.0.1/Data-Word.html#t:Word32">Word32</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#word32BE" class="link">Source</a></p><div class="doc"><p>Encode a <code><a href="../base-4.6.0.1/Data-Word.html#t:Word32">Word32</a></code> in big endian format.
</p></div></div><div class="top"><p class="src"><a name="v:word64BE" class="def">word64BE</a> :: <a href="../base-4.6.0.1/Data-Word.html#t:Word64">Word64</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#word64BE" class="link">Source</a></p><div class="doc"><p>Encode a <code><a href="../base-4.6.0.1/Data-Word.html#t:Word64">Word64</a></code> in big endian format.
</p></div></div><div class="top"><p class="src"><a name="v:floatBE" class="def">floatBE</a> :: <a href="../base-4.6.0.1/Prelude.html#t:Float">Float</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#floatBE" class="link">Source</a></p><div class="doc"><p>Encode a <code><a href="../base-4.6.0.1/Prelude.html#t:Float">Float</a></code> in big endian format.
</p></div></div><div class="top"><p class="src"><a name="v:doubleBE" class="def">doubleBE</a> :: <a href="../base-4.6.0.1/Prelude.html#t:Double">Double</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#doubleBE" class="link">Source</a></p><div class="doc"><p>Encode a <code><a href="../base-4.6.0.1/Prelude.html#t:Double">Double</a></code> in big endian format.
</p></div></div><h3 id="g:6">Little-endian
</h3><div class="top"><p class="src"><a name="v:int16LE" class="def">int16LE</a> :: <a href="../base-4.6.0.1/Data-Int.html#t:Int16">Int16</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#int16LE" class="link">Source</a></p><div class="doc"><p>Encode an <code><a href="../base-4.6.0.1/Data-Int.html#t:Int16">Int16</a></code> in little endian format.
</p></div></div><div class="top"><p class="src"><a name="v:int32LE" class="def">int32LE</a> :: <a href="../base-4.6.0.1/Data-Int.html#t:Int32">Int32</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#int32LE" class="link">Source</a></p><div class="doc"><p>Encode an <code><a href="../base-4.6.0.1/Data-Int.html#t:Int32">Int32</a></code> in little endian format.
</p></div></div><div class="top"><p class="src"><a name="v:int64LE" class="def">int64LE</a> :: <a href="../base-4.6.0.1/Data-Int.html#t:Int64">Int64</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#int64LE" class="link">Source</a></p><div class="doc"><p>Encode an <code><a href="../base-4.6.0.1/Data-Int.html#t:Int64">Int64</a></code> in little endian format.
</p></div></div><div class="top"><p class="src"><a name="v:word16LE" class="def">word16LE</a> :: <a href="../base-4.6.0.1/Data-Word.html#t:Word16">Word16</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#word16LE" class="link">Source</a></p><div class="doc"><p>Encode a <code><a href="../base-4.6.0.1/Data-Word.html#t:Word16">Word16</a></code> in little endian format.
</p></div></div><div class="top"><p class="src"><a name="v:word32LE" class="def">word32LE</a> :: <a href="../base-4.6.0.1/Data-Word.html#t:Word32">Word32</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#word32LE" class="link">Source</a></p><div class="doc"><p>Encode a <code><a href="../base-4.6.0.1/Data-Word.html#t:Word32">Word32</a></code> in little endian format.
</p></div></div><div class="top"><p class="src"><a name="v:word64LE" class="def">word64LE</a> :: <a href="../base-4.6.0.1/Data-Word.html#t:Word64">Word64</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#word64LE" class="link">Source</a></p><div class="doc"><p>Encode a <code><a href="../base-4.6.0.1/Data-Word.html#t:Word64">Word64</a></code> in little endian format.
</p></div></div><div class="top"><p class="src"><a name="v:floatLE" class="def">floatLE</a> :: <a href="../base-4.6.0.1/Prelude.html#t:Float">Float</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#floatLE" class="link">Source</a></p><div class="doc"><p>Encode a <code><a href="../base-4.6.0.1/Prelude.html#t:Float">Float</a></code> in little endian format.
</p></div></div><div class="top"><p class="src"><a name="v:doubleLE" class="def">doubleLE</a> :: <a href="../base-4.6.0.1/Prelude.html#t:Double">Double</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#doubleLE" class="link">Source</a></p><div class="doc"><p>Encode a <code><a href="../base-4.6.0.1/Prelude.html#t:Double">Double</a></code> in little endian format.
</p></div></div><h2 id="g:7">Character encodings
</h2><h3 id="g:8">ASCII (Char7)
</h3><div class="doc"><p>The ASCII encoding is a 7-bit encoding. The <em>Char7</em> encoding implemented here
 works by truncating the Unicode codepoint to 7-bits, prefixing it
 with a leading 0, and encoding the resulting 8-bits as a single byte.
 For the codepoints 0-127 this corresponds the ASCII encoding. In
 <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder-ASCII.html">Data.ByteString.Lazy.Builder.ASCII</a>, we also provide efficient
 implementations of ASCII-based encodings of numbers (e.g., decimal and
 hexadecimal encodings).
</p></div><div class="top"><p class="src"><a name="v:char7" class="def">char7</a> :: <a href="../base-4.6.0.1/Data-Char.html#t:Char">Char</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#char7" class="link">Source</a></p><div class="doc"><p>Char7 encode a <code><a href="../base-4.6.0.1/Data-Char.html#t:Char">Char</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:string7" class="def">string7</a> :: <a href="../base-4.6.0.1/Data-String.html#t:String">String</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#string7" class="link">Source</a></p><div class="doc"><p>Char7 encode a <code><a href="../base-4.6.0.1/Data-String.html#t:String">String</a></code>.
</p></div></div><h3 id="g:9">ISO/IEC 8859-1 (Char8)
</h3><div class="doc"><p>The ISO/IEC 8859-1 encoding is an 8-bit encoding often known as Latin-1.
 The <em>Char8</em> encoding implemented here works by truncating the Unicode codepoint
 to 8-bits and encoding them as a single byte. For the codepoints 0-255 this corresponds
 to the ISO/IEC 8859-1 encoding. Note that you can also use
 the functions from <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder-ASCII.html">Data.ByteString.Lazy.Builder.ASCII</a>, as the ASCII encoding
 and ISO/IEC 8859-1 are equivalent on the codepoints 0-127.
</p></div><div class="top"><p class="src"><a name="v:char8" class="def">char8</a> :: <a href="../base-4.6.0.1/Data-Char.html#t:Char">Char</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#char8" class="link">Source</a></p><div class="doc"><p>Char8 encode a <code><a href="../base-4.6.0.1/Data-Char.html#t:Char">Char</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:string8" class="def">string8</a> :: <a href="../base-4.6.0.1/Data-String.html#t:String">String</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#string8" class="link">Source</a></p><div class="doc"><p>Char8 encode a <code><a href="../base-4.6.0.1/Data-String.html#t:String">String</a></code>.
</p></div></div><h3 id="g:10">UTF-8
</h3><div class="doc"><p>The UTF-8 encoding can encode <em>all</em> Unicode codepoints. We recommend
 using it always for encoding <code><a href="../base-4.6.0.1/Data-Char.html#t:Char">Char</a></code>s and <code><a href="../base-4.6.0.1/Data-String.html#t:String">String</a></code>s unless an application
 really requires another encoding. Note that you can also use the
 functions from <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder-ASCII.html">Data.ByteString.Lazy.Builder.ASCII</a> for UTF-8 encoding,
 as the ASCII encoding is equivalent to the UTF-8 encoding on the Unicode
 codepoints 0-127.
</p></div><div class="top"><p class="src"><a name="v:charUtf8" class="def">charUtf8</a> :: <a href="../base-4.6.0.1/Data-Char.html#t:Char">Char</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#charUtf8" class="link">Source</a></p><div class="doc"><p>UTF-8 encode a <code><a href="../base-4.6.0.1/Data-Char.html#t:Char">Char</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:stringUtf8" class="def">stringUtf8</a> :: <a href="../base-4.6.0.1/Data-String.html#t:String">String</a> -&gt; <a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#t:Builder">Builder</a><a href="../bytestring-0.10.0.2/Data-ByteString-Lazy-Builder.html#stringUtf8" class="link">Source</a></p><div class="doc"><p>UTF-8 encode a <code><a href="../base-4.6.0.1/Data-String.html#t:String">String</a></code>.
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.2</p></div></body></html>