<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta><title>Distribution.Simple.SrcDist</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean"></link><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Distribution-Simple-SrcDist.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="../Cabal-1.16.0/Distribution-Simple-SrcDist.html">Source</a></li><li><a href="../Cabal-1.16.0/index.html">Contents</a></li><li><a href="../Cabal-1.16.0/doc-index.html">Index</a></li></ul><p class="caption">Cabal-1.16.0: A framework for packaging Haskell software</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Portability</th><td>portable</td></tr><tr><th>Maintainer</th><td>cabal-devel@haskell.org</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Distribution.Simple.SrcDist</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="../Cabal-1.16.0/#g:1">The top level action
</a><ul><li><a href="../Cabal-1.16.0/#g:2">Parts of <code><a href="../Cabal-1.16.0/Distribution-Simple-SrcDist.html#v:sdist">sdist</a></code>
</a></li><li><a href="../Cabal-1.16.0/#g:3">Snaphots
</a></li></ul></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This handles the <code>sdist</code> command. The module exports an <code><a href="../Cabal-1.16.0/Distribution-Simple-SrcDist.html#v:sdist">sdist</a></code> action but
 also some of the phases that make it up so that other tools can use just the
 bits they need. In particular the preparation of the tree of files to go
 into the source tarball is separated from actually building the source
 tarball.
</p><p>The <code><a href="../Cabal-1.16.0/Distribution-Simple-SrcDist.html#v:createArchive">createArchive</a></code> action uses the external <code>tar</code> program and assumes that
 it accepts the <code>-z</code> flag. Neither of these assumptions are valid on Windows.
 The <code><a href="../Cabal-1.16.0/Distribution-Simple-SrcDist.html#v:sdist">sdist</a></code> action now also does some distribution QA checks.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="../Cabal-1.16.0/#v:sdist">sdist</a> :: <a href="../Cabal-1.16.0/Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a> -&gt; <a href="../base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../Cabal-1.16.0/Distribution-Simple-LocalBuildInfo.html#t:LocalBuildInfo">LocalBuildInfo</a> -&gt; <a href="../Cabal-1.16.0/Distribution-Simple-Setup.html#t:SDistFlags">SDistFlags</a> -&gt; (<a href="../base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a>) -&gt; [<a href="../Cabal-1.16.0/Distribution-Simple-PreProcess.html#t:PPSuffixHandler">PPSuffixHandler</a>] -&gt; <a href="../base-4.6.0.1/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="../Cabal-1.16.0/#v:printPackageProblems">printPackageProblems</a> :: <a href="../Cabal-1.16.0/Distribution-Verbosity.html#t:Verbosity">Verbosity</a> -&gt; <a href="../Cabal-1.16.0/Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a> -&gt; <a href="../base-4.6.0.1/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="../Cabal-1.16.0/#v:prepareTree">prepareTree</a> :: <a href="../Cabal-1.16.0/Distribution-Verbosity.html#t:Verbosity">Verbosity</a> -&gt; <a href="../Cabal-1.16.0/Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a> -&gt; <a href="../base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../Cabal-1.16.0/Distribution-Simple-LocalBuildInfo.html#t:LocalBuildInfo">LocalBuildInfo</a> -&gt; <a href="../base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a> -&gt; [<a href="../Cabal-1.16.0/Distribution-Simple-PreProcess.html#t:PPSuffixHandler">PPSuffixHandler</a>] -&gt; <a href="../base-4.6.0.1/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="../Cabal-1.16.0/#v:createArchive">createArchive</a> :: <a href="../Cabal-1.16.0/Distribution-Verbosity.html#t:Verbosity">Verbosity</a> -&gt; <a href="../Cabal-1.16.0/Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a> -&gt; <a href="../base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../Cabal-1.16.0/Distribution-Simple-LocalBuildInfo.html#t:LocalBuildInfo">LocalBuildInfo</a> -&gt; <a href="../base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.6.0.1/System-IO.html#t:IO">IO</a> <a href="../base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a></li><li class="src short"><a href="../Cabal-1.16.0/#v:prepareSnapshotTree">prepareSnapshotTree</a> :: <a href="../Cabal-1.16.0/Distribution-Verbosity.html#t:Verbosity">Verbosity</a> -&gt; <a href="../Cabal-1.16.0/Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a> -&gt; <a href="../base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../Cabal-1.16.0/Distribution-Simple-LocalBuildInfo.html#t:LocalBuildInfo">LocalBuildInfo</a> -&gt; <a href="../base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a> -&gt; [<a href="../Cabal-1.16.0/Distribution-Simple-PreProcess.html#t:PPSuffixHandler">PPSuffixHandler</a>] -&gt; <a href="../base-4.6.0.1/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="../Cabal-1.16.0/#v:snapshotPackage">snapshotPackage</a> :: <a href="../old-time-1.1.0.1/System-Time.html#t:CalendarTime">CalendarTime</a> -&gt; <a href="../Cabal-1.16.0/Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a> -&gt; <a href="../Cabal-1.16.0/Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a></li><li class="src short"><a href="../Cabal-1.16.0/#v:snapshotVersion">snapshotVersion</a> :: <a href="../old-time-1.1.0.1/System-Time.html#t:CalendarTime">CalendarTime</a> -&gt; <a href="../Cabal-1.16.0/Distribution-Version.html#t:Version">Version</a> -&gt; <a href="../Cabal-1.16.0/Distribution-Version.html#t:Version">Version</a></li><li class="src short"><a href="../Cabal-1.16.0/#v:dateToSnapshotNumber">dateToSnapshotNumber</a> :: <a href="../old-time-1.1.0.1/System-Time.html#t:CalendarTime">CalendarTime</a> -&gt; <a href="../base-4.6.0.1/Data-Int.html#t:Int">Int</a></li></ul></div><div id="interface"><h1 id="g:1">The top level action
</h1><div class="top"><p class="src"><a name="v:sdist" class="def">sdist</a><a href="../Cabal-1.16.0/Distribution-Simple-SrcDist.html#sdist" class="link">Source</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../Cabal-1.16.0/Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a></td><td class="doc"><p>information from the tarball
</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../Cabal-1.16.0/Distribution-Simple-LocalBuildInfo.html#t:LocalBuildInfo">LocalBuildInfo</a></td><td class="doc"><p>Information from configure
</p></td></tr><tr><td class="src">-&gt; <a href="../Cabal-1.16.0/Distribution-Simple-Setup.html#t:SDistFlags">SDistFlags</a></td><td class="doc"><p>verbosity &amp; snapshot
</p></td></tr><tr><td class="src">-&gt; (<a href="../base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a>)</td><td class="doc"><p>build prefix (temp dir)
</p></td></tr><tr><td class="src">-&gt; [<a href="../Cabal-1.16.0/Distribution-Simple-PreProcess.html#t:PPSuffixHandler">PPSuffixHandler</a>]</td><td class="doc"><p>extra preprocessors (includes suffixes)
</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.6.0.1/System-IO.html#t:IO">IO</a> ()</td><td class="doc empty"> </td></tr></table></div><div class="doc"><p>Create a source distribution.
</p></div></div><h2 id="g:2">Parts of <code><a href="../Cabal-1.16.0/Distribution-Simple-SrcDist.html#v:sdist">sdist</a></code>
</h2><div class="top"><p class="src"><a name="v:printPackageProblems" class="def">printPackageProblems</a> :: <a href="../Cabal-1.16.0/Distribution-Verbosity.html#t:Verbosity">Verbosity</a> -&gt; <a href="../Cabal-1.16.0/Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a> -&gt; <a href="../base-4.6.0.1/System-IO.html#t:IO">IO</a> ()<a href="../Cabal-1.16.0/Distribution-Simple-SrcDist.html#printPackageProblems" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:prepareTree" class="def">prepareTree</a><a href="../Cabal-1.16.0/Distribution-Simple-SrcDist.html#prepareTree" class="link">Source</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../Cabal-1.16.0/Distribution-Verbosity.html#t:Verbosity">Verbosity</a></td><td class="doc"><p>verbosity
</p></td></tr><tr><td class="src">-&gt; <a href="../Cabal-1.16.0/Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a></td><td class="doc"><p>info from the cabal file
</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../Cabal-1.16.0/Distribution-Simple-LocalBuildInfo.html#t:LocalBuildInfo">LocalBuildInfo</a></td><td class="doc empty"> </td></tr><tr><td class="src">-&gt; <a href="../base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>dist dir
</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>source tree to populate
</p></td></tr><tr><td class="src">-&gt; [<a href="../Cabal-1.16.0/Distribution-Simple-PreProcess.html#t:PPSuffixHandler">PPSuffixHandler</a>]</td><td class="doc"><p>extra preprocessors (includes suffixes)
</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.6.0.1/System-IO.html#t:IO">IO</a> ()</td><td class="doc empty"> </td></tr></table></div><div class="doc"><p>Prepare a directory tree of source files.
</p></div></div><div class="top"><p class="src"><a name="v:createArchive" class="def">createArchive</a><a href="../Cabal-1.16.0/Distribution-Simple-SrcDist.html#createArchive" class="link">Source</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../Cabal-1.16.0/Distribution-Verbosity.html#t:Verbosity">Verbosity</a></td><td class="doc"><p>verbosity
</p></td></tr><tr><td class="src">-&gt; <a href="../Cabal-1.16.0/Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a></td><td class="doc"><p>info from cabal file
</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../Cabal-1.16.0/Distribution-Simple-LocalBuildInfo.html#t:LocalBuildInfo">LocalBuildInfo</a></td><td class="doc"><p>info from configure
</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>source tree to archive
</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>name of archive to create
</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.6.0.1/System-IO.html#t:IO">IO</a> <a href="../base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a></td><td class="doc empty"> </td></tr></table></div><div class="doc"><p>Create an archive from a tree of source files, and clean up the tree.
</p></div></div><h2 id="g:3">Snaphots
</h2><div class="top"><p class="src"><a name="v:prepareSnapshotTree" class="def">prepareSnapshotTree</a><a href="../Cabal-1.16.0/Distribution-Simple-SrcDist.html#prepareSnapshotTree" class="link">Source</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../Cabal-1.16.0/Distribution-Verbosity.html#t:Verbosity">Verbosity</a></td><td class="doc"><p>verbosity
</p></td></tr><tr><td class="src">-&gt; <a href="../Cabal-1.16.0/Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a></td><td class="doc"><p>info from the cabal file
</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.6.0.1/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../Cabal-1.16.0/Distribution-Simple-LocalBuildInfo.html#t:LocalBuildInfo">LocalBuildInfo</a></td><td class="doc empty"> </td></tr><tr><td class="src">-&gt; <a href="../base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>dist dir
</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.6.0.1/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>source tree to populate
</p></td></tr><tr><td class="src">-&gt; [<a href="../Cabal-1.16.0/Distribution-Simple-PreProcess.html#t:PPSuffixHandler">PPSuffixHandler</a>]</td><td class="doc"><p>extra preprocessors (includes suffixes)
</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.6.0.1/System-IO.html#t:IO">IO</a> ()</td><td class="doc empty"> </td></tr></table></div><div class="doc"><p>Prepare a directory tree of source files for a snapshot version.
 It is expected that the appropriate snapshot version has already been set
 in the package description, eg using <code><a href="../Cabal-1.16.0/Distribution-Simple-SrcDist.html#v:snapshotPackage">snapshotPackage</a></code> or <code><a href="../Cabal-1.16.0/Distribution-Simple-SrcDist.html#v:snapshotVersion">snapshotVersion</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:snapshotPackage" class="def">snapshotPackage</a> :: <a href="../old-time-1.1.0.1/System-Time.html#t:CalendarTime">CalendarTime</a> -&gt; <a href="../Cabal-1.16.0/Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a> -&gt; <a href="../Cabal-1.16.0/Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a><a href="../Cabal-1.16.0/Distribution-Simple-SrcDist.html#snapshotPackage" class="link">Source</a></p><div class="doc"><p>Modifies a <code><a href="../Cabal-1.16.0/Distribution-PackageDescription.html#t:PackageDescription">PackageDescription</a></code> by appending a snapshot number
 corresponding to the given date.
</p></div></div><div class="top"><p class="src"><a name="v:snapshotVersion" class="def">snapshotVersion</a> :: <a href="../old-time-1.1.0.1/System-Time.html#t:CalendarTime">CalendarTime</a> -&gt; <a href="../Cabal-1.16.0/Distribution-Version.html#t:Version">Version</a> -&gt; <a href="../Cabal-1.16.0/Distribution-Version.html#t:Version">Version</a><a href="../Cabal-1.16.0/Distribution-Simple-SrcDist.html#snapshotVersion" class="link">Source</a></p><div class="doc"><p>Modifies a <code><a href="../Cabal-1.16.0/Distribution-Version.html#t:Version">Version</a></code> by appending a snapshot number corresponding
 to the given date.
</p></div></div><div class="top"><p class="src"><a name="v:dateToSnapshotNumber" class="def">dateToSnapshotNumber</a> :: <a href="../old-time-1.1.0.1/System-Time.html#t:CalendarTime">CalendarTime</a> -&gt; <a href="../base-4.6.0.1/Data-Int.html#t:Int">Int</a><a href="../Cabal-1.16.0/Distribution-Simple-SrcDist.html#dateToSnapshotNumber" class="link">Source</a></p><div class="doc"><p>Given a date produce a corresponding integer representation.
 For example given a date <code>18<em>03</em>2008</code> produce the number <code>20080318</code>.
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.2</p></div></body></html>